"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.response = exports.request = void 0;
const utils_1 = require("@aws-appsync/utils");
const helpers_1 = require("../../lib/helpers");
function request(ctx) {
    // add timestamps
    const item = (0, helpers_1.createItem)(ctx.args.input);
    const id = utils_1.util.dynamodb.toDynamoDB(utils_1.util.autoId());
    return {
        operation: 'PutItem',
        key: {
            PK: "BUILDING",
            SK: `BUILDING#${id}`
        },
        attributeValues: utils_1.util.dynamodb.toMapValues({
            GSI2PK: `USER#${item.userId}`,
            GSI2SK: `BUILDING#${id}`,
            ENTITY: "BUILDING",
            publishDate: utils_1.util.time.nowISO8601(),
            ...item,
        }),
    };
}
exports.request = request;
function response(ctx) {
    return ctx.result;
}
exports.response = response;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlQnVpbGRpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjcmVhdGVCdWlsZGluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw4Q0FBMkU7QUFDM0UsK0NBQStDO0FBRy9DLFNBQWdCLE9BQU8sQ0FDckIsR0FBd0M7SUFFeEMsaUJBQWlCO0lBQ2pCLE1BQU0sSUFBSSxHQUFHLElBQUEsb0JBQVUsRUFBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sRUFBRSxHQUFHLFlBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFlBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO0lBRWxELE9BQU87UUFDTCxTQUFTLEVBQUUsU0FBUztRQUNwQixHQUFHLEVBQUU7WUFDSCxFQUFFLEVBQUUsVUFBVTtZQUNkLEVBQUUsRUFBRSxZQUFZLEVBQUUsRUFBRTtTQUNyQjtRQUNELGVBQWUsRUFBRSxZQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztZQUN6QyxNQUFNLEVBQUUsUUFBUSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQzdCLE1BQU0sRUFBRSxZQUFZLEVBQUUsRUFBRTtZQUN4QixNQUFNLEVBQUUsVUFBVTtZQUNsQixXQUFXLEVBQUUsWUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkMsR0FBRyxJQUFJO1NBQ1IsQ0FBQztLQUNILENBQUM7QUFDSixDQUFDO0FBckJELDBCQXFCQztBQUVELFNBQWdCLFFBQVEsQ0FDdEIsR0FBMEU7SUFFMUUsT0FBTyxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ3BCLENBQUM7QUFKRCw0QkFJQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRleHQsIER5bmFtb0RCUHV0SXRlbVJlcXVlc3QsIHV0aWwgfSBmcm9tICdAYXdzLWFwcHN5bmMvdXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlSXRlbSB9IGZyb20gJy4uLy4uL2xpYi9oZWxwZXJzJztcbmltcG9ydCB7IE11dGF0aW9uQ3JlYXRlQnVpbGRpbmdBcmdzLCBCdWlsZGluZyB9IGZyb20gJy4uLy4uL3R5cGVzL2FwcHN5bmMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWVzdChcbiAgY3R4OiBDb250ZXh0PE11dGF0aW9uQ3JlYXRlQnVpbGRpbmdBcmdzPixcbik6IER5bmFtb0RCUHV0SXRlbVJlcXVlc3Qge1xuICAvLyBhZGQgdGltZXN0YW1wc1xuICBjb25zdCBpdGVtID0gY3JlYXRlSXRlbShjdHguYXJncy5pbnB1dCEpO1xuICBjb25zdCBpZCA9IHV0aWwuZHluYW1vZGIudG9EeW5hbW9EQih1dGlsLmF1dG9JZCgpKVxuXG4gIHJldHVybiB7XG4gICAgb3BlcmF0aW9uOiAnUHV0SXRlbScsXG4gICAga2V5OiB7XG4gICAgICBQSzogXCJCVUlMRElOR1wiLFxuICAgICAgU0s6IGBCVUlMRElORyMke2lkfWBcbiAgICB9LFxuICAgIGF0dHJpYnV0ZVZhbHVlczogdXRpbC5keW5hbW9kYi50b01hcFZhbHVlcyh7XG4gICAgICBHU0kyUEs6IGBVU0VSIyR7aXRlbS51c2VySWR9YCxcbiAgICAgIEdTSTJTSzogYEJVSUxESU5HIyR7aWR9YCxcbiAgICAgIEVOVElUWTogXCJCVUlMRElOR1wiLFxuICAgICAgcHVibGlzaERhdGU6IHV0aWwudGltZS5ub3dJU084NjAxKCksXG4gICAgICAuLi5pdGVtLFxuICAgIH0pLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzcG9uc2UoXG4gIGN0eDogQ29udGV4dDxNdXRhdGlvbkNyZWF0ZUJ1aWxkaW5nQXJncywgb2JqZWN0LCBvYmplY3QsIG9iamVjdCwgQnVpbGRpbmc+LFxuKSB7XG4gIHJldHVybiBjdHgucmVzdWx0O1xufSJdfQ==